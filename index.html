<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta name="google-site-verification" content="EX3cQJimgpW0qustR180xDtT-Sk70hGhW2pBQZxUxwk" />
<meta charset="UTF-8">
<title>×“Ö¼×£ ×”Ö·×‘Ö·Ö¼×™Ö´×ª</title>
<link rel="icon" href="https://cdn-icons-png.flaticon.com/128/6268/6268612.png" type="image/svg+xml">
<meta name="description" content="×“×£ ×”×‘×™×ª ×”× ×— ×‘×™×•×ª×¨, ×¢× ×§×™×©×•×¨×™× ×©×™××•×©×™×™×, ×—×™×¤×•×© ×‘×’×•×’×œ, ×•×ª×•×›×Ÿ ×¢×“×›× ×™. ××ª×¨ × ×’×™×© ×•× ×•×— ×œ×’×œ×™×©×”.">
<meta name="keywords" content="×“×£ ×”×‘×™×ª, ×§×™×©×•×¨×™× ×©×™××•×©×™×™×, ×—×™×¤×•×©, × ×’×™×©×•×ª, ××ª×¨ × ×—, ×ª×¤×¨×™×˜ ×¦×“, ××ª×¨×™ ×‘×™×ª">
<meta name="author" content="×“×•×“ ×”×•×›××Ÿ">
<meta name="robots" content="index, follow">
<meta name="google" content="notranslate">
<meta property="og:title" content="×“Ö¼×£ ×”Ö·×‘Ö·Ö¼×™Ö´×ª">
<meta property="og:description" content="×“×£ ×”×‘×™×ª ×”× ×— ×‘×™×•×ª×¨, ×¢× ×§×™×©×•×¨×™× ×©×™××•×©×™×™×, ×—×™×¤×•×© ×‘×’×•×’×œ ×•×ª×•×›×Ÿ ×¢×“×›× ×™.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://your-website-url.com/">
<meta property="og:image" content="https://upload.wikimedia.org/wikipedia/commons/3/3c/Google_Favicon_2025.svg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="×“Ö¼×£ ×”Ö·×‘Ö·Ö¼×™Ö´×ª">
<meta name="twitter:description" content="×“×£ ×”×‘×™×ª ×”× ×— ×‘×™×•×ª×¨, ×¢× ×§×™×©×•×¨×™× ×©×™××•×©×™×™×, ×—×™×¤×•×© ×‘×’×•×’×œ ×•×ª×•×›×Ÿ ×¢×“×›× ×™.">
<meta name="twitter:image" content="https://upload.wikimedia.org/wikipedia/commons/3/3c/Google_Favicon_2025.svg">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QMBFDT1EWD"></script>
<script>
Â  window.dataLayer = window.dataLayer || [];
Â  function gtag(){dataLayer.push(arguments);}
Â  gtag('js', new Date());
Â  gtag('config', 'G-QMBFDT1EWD');
</script>
<style>
/* CSS ×“×—×•×¡ ×•××ª×•×§×Ÿ */
body{font-family:"Segoe UI",Arial,sans-serif;background:#f5f6fa;margin:0;padding:0 20px 20px;direction:rtl;min-height:100vh;color:#333;display:flex;flex-direction:column}
.side-menu{position:fixed;top:0;right:0;width:80px;height:100vh;background:#fff;box-shadow:-2px 0 10px rgba(0,0,0,.15);display:flex;flex-direction:column;justify-content:space-between;align-items:center;padding:10px 0;z-index:20}
.side-menu button{background:none;border:none;display:flex;flex-direction:column;align-items:center;cursor:pointer;font-size:.7em;color:#333;transition:.15s;gap:5px;padding:8px}
.side-menu button img{width:30px;height:30px}
.side-menu button:hover{transform:translateY(-2px);color:#0078d7}
.side-menu button.active{font-weight:700;color:#0078d7;background:#eef7ff;border-radius:8px;}
.side-menu .top-buttons,.side-menu .bottom-button{display:flex;flex-direction:column;gap:15px}
.side-menu .bottom-button{position:absolute;bottom:35px}
.actions{position:fixed;top:12px;right:100px;display:flex;gap:10px;z-index:15}
.actions button{padding:8px 12px;border:none;border-radius:8px;cursor:pointer;font-size:.9em;transition:.15s;box-shadow:0 2px 5px rgba(0,0,0,.15);font-weight:700;visibility:hidden}
.save-btn{background:#28a745;color:#fff}
.cancel-btn{background:#dc3545;color:#fff}
.page{display:none;margin-top:70px;margin-right:100px;flex:1;flex-direction:column}
#home{display:flex;flex-direction:column}
.search-container{display:flex;justify-content:center;position:fixed;top:12px;left:0;width:100%;z-index:10}
.search-box{display:flex;align-items:center;background:#fff;border-radius:50px;padding:5px 15px;width:500px;max-width:90%;box-shadow:0 3px 10px rgba(0,0,0,.15)}
.search-box input{border:none;outline:none;flex:1;padding:10px 12px;font-size:1em;border-radius:50px}
.search-box button{background:none;border:none;cursor:pointer;font-size:1.2em;margin-left:8px}
#categoriesContainer{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}
.category-box{background:rgba(255,255,255,.7);padding:15px;margin-bottom:20px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.08);position:relative;cursor:default;}
.category-box.editing:not(.dragging){border:2px dashed #0078d7;}
.category-box h3{margin:0 0 15px;padding:5px 10px;border-radius:4px;transition:background .2s}
.category-box h3[contenteditable="true"]{background:#e3f2fd;border:1px dashed #0078d7;cursor:text}
.category-delete-btn{position:absolute;top:10px;left:10px;background:#dc3545;color:#fff;border:none;padding:6px 10px;border-radius:8px;font-size:.85em;font-weight:700;cursor:pointer;display:none;z-index:10;transition:.2s}
.cards-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(80px,1fr));gap:20px;min-height:50px;}
.card{background:#f0f2f5;border-radius:16px;padding:10px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;cursor:pointer;transition:.2s;position:relative}
.card:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,0,0,.12)}
.card img{width:40px;height:40px;object-fit:contain;margin-bottom:5px}
.card a{font-size:.75em;color:#0078d7;text-decoration:none;font-weight:600;word-break:break-word}
.card.editing{background:#f0f2f5;border:none;box-shadow:none;padding:10px;height:auto;min-height:auto;justify-content:center;gap:0;cursor:grab;}
.card.dragging{opacity:.5;border:2px dashed #0078d7;}
.delete-btn{position:absolute;top:-5px;left:-5px;background:#dc3545;color:#fff;font-size:.7em;padding:4px 6px;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-weight:900;line-height:1;z-index:10;border:2px solid #fff}
.category-box .add-btn-modal{width:100%;border-radius:8px;margin:15px 0 5px 0;padding:8px;height:auto;font-size:1em;font-weight:600;background:#0078d7;color:#fff;border:none;cursor:pointer;display:none}
#addCategoryBtn{background:#28a745;color:#fff;border:none;border-radius:8px;width:250px;height:auto;padding:12px 20px;font-size:1.1em;font-weight:700;margin:30px auto;box-shadow:0 4px 10px rgba(40,167,69,.4);transition:.2s;display:none}
.home-content-box{background:rgba(255,255,255,.7);padding:15px;margin-bottom:20px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.08);width:fit-content;max-width:100%;margin-top:300px}
.recent-home{margin-top:-0;display:flex;gap:10px;z-index:15}
.recent-home .card{width:65px;height:75px;padding:3px}
.recent-home .card img{width:30px;height:30px}
.recent-home .card a{font-size:.65em}
#edit-tip-box{background:#fff3cd;color:#856404;border:1px solid #ffeeba;padding:10px 15px;border-radius:8px;margin-bottom:20px;font-size:.95em;font-weight:600;box-shadow:0 2px 4px rgba(0,0,0,.1);display:none}
.extras-container{display:flex;gap:15px;height:76vh}
.frame{flex:1;margin:0;border-radius:15px;overflow:hidden;box-shadow:0 4px 8px rgba(0,0,0,.2);background:#fff;position:relative;padding-top:30px}
.frame iframe{width:100%;height:100%;border:none;margin-top:5px}
.frame-actions{position:absolute;top:0;right:0;display:flex;gap:5px;z-index:5;background:#e9ecef;padding:5px 10px;border-bottom-left-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,.1)}
.frame-actions button{background:#e9ecef;color:#333;border:none;padding:4px 7px;border-radius:6px;cursor:pointer;font-size:.85em;transition:.2s;line-height:1}
#modalIframe,#editModal,#backgroundModal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);display:none;justify-content:center;align-items:center;z-index:9999}
/* ×ª×™×§×•×Ÿ ×”×‘××’: ×©×™××•×© ×‘-flexbox ×•×’×•×‘×” 100% ×›×“×™ ×œ××œ× ××ª ×”××¡×š */
#modalIframe .modal-content-iframe{width:90%;height:90%;background:#fff;border-radius:12px;overflow:hidden;position:relative;box-shadow:0 0 50px rgba(0,0,0,.9);display:flex;flex-direction:column;}
#fullScreenIframe{width:100%;height:100%;border:none;flex-grow:1;} /* ×”-iframe ×××œ× ××ª ×›×œ ×”×©×˜×— ×”× ×•×ª×¨ */
#modalIframe .close-modal-iframe{position:absolute;top:10px;left:10px;background:#dc3545;color:#fff;border:none;padding:8px 15px;border-radius:8px;cursor:pointer;font-weight:700;z-index:10000}
#backgroundModal .modal-content{background:#fff;padding:20px;border-radius:12px;width:80%;max-width:600px;text-align:center;box-shadow:0 4px 20px rgba(0,0,0,.3)}
.bg-options{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin:15px 0}
.bg-options img{width:80px;height:60px;object-fit:cover;border-radius:8px;cursor:pointer;transition:.2s}
.close-btn,.daily-bg-btn{background:#dc3545;color:#fff;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;margin-top:10px;font-weight:700}
.daily-bg-btn{background:#0078d7}
#editModal .modal-content{background:#fff;padding:25px;border-radius:12px;width:90%;max-width:400px;text-align:center;box-shadow:0 8px 30px rgba(0,0,0,.3)}
#editModal h3{margin-top:0;color:#0078d7}
#editModal input{width:100%;padding:10px;margin-bottom:15px;border:1px solid #ccc;border-radius:8px;font-size:1em;box-sizing:border-box}
#editModal button{padding:10px 15px;border:none;border-radius:8px;cursor:pointer;font-weight:700;transition:.2s;margin:0 5px}
#editModal #saveSiteBtn{background:#28a745;color:#fff}
#editModal #cancelSiteBtn{background:#dc3545;color:#fff}
#editModal #deleteSiteBtn{background:#f0ad4e;color:#fff;margin-top:10px}
#historyPage{display:flex;flex-direction:column;gap:20px}
.history-controls{display:flex;gap:10px;margin-bottom:10px;padding:10px;background:rgba(255,255,255,.85);border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.15);align-self:flex-start}
.history-controls button{padding:8px 15px;border:none;border-radius:8px;cursor:pointer;font-weight:700;transition:.15s;box-shadow:0 2px 5px rgba(0,0,0,.1)}
.history-controls button:first-child{background:#0078d7;color:#fff}
.history-controls button:last-child{background:#dc3545;color:#fff}
.history-item{display:flex;align-items:center;background:#fff;padding:10px 15px;border-radius:8px;box-shadow:0 1px 4px rgba(0,0,0,.08);margin-bottom:10px}
.history-item img{width:18px;height:18px;margin-left:10px}
.history-item a{flex-grow:1;color:#0078d7;text-decoration:none;font-weight:600;margin-right:15px;margin-left:5px}
.history-item .remove-item{background:#f8d7da;color:#721c24;border:none;padding:5px 8px;border-radius:6px;cursor:pointer;font-size:.8em}
@media(max-width:900px){.cards-grid{grid-template-columns:repeat(auto-fill,minmax(60px,1fr))}.extras-container{flex-direction:column;height:auto}}
</style>
<script type="text/javascript">
(function(c,l,a,r,i,t,y){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);})(window, document, "clarity", "script", "tk5k6vlyx4");
</script>
</head>
<body>
<div class="side-menu">
<div class="top-buttons">
<button onclick="showPage('home',this)"><img src="https://cdn-icons-png.flaticon.com/128/263/263115.png"><span>×‘×™×ª</span></button>
<button onclick="showPage('sites',this)"><img src="https://cdn-icons-png.flaticon.com/128/900/900782.png"><span>××ª×¨×™×</span></button>
<button onclick="showPage('extras',this)"><img src="https://cdn-icons-png.flaticon.com/128/2995/2995035.png"><span>××•×–×™×§×”</span></button>
<button onclick="showPage('news',this)"><img src="https://cdn-icons-png.flaticon.com/128/81/81460.png"><span>×—×“×©×•×ª</span></button>
<button onclick="showPage('historyPage',this)"><img src="https://cdn-icons-png.flaticon.com/128/833/833602.png"><span>×”×™×¡×˜×•×¨×™×”</span></button>
</div>
<div class="bottom-button">
<button id="editBtn" onclick="toggleEdit()"><img src="https://cdn-icons-png.flaticon.com/128/1159/1159633.png"><span>×¢×¨×™×›×”</span></button>
<button onclick="openBackgroundModal()"><img src="https://cdn-icons-png.flaticon.com/128/3342/3342137.png"><span>×¨×§×¢</span></button>
</div>
</div>
<div class="actions">
<button class="save-btn" onclick="saveData()">ğŸ’¾ ×©××™×¨×”</button>
<button class="cancel-btn" onclick="cancelEdit()">âŒ ×‘×™×˜×•×œ</button>
</div>
<div class="search-container">
<div class="search-box">
<input type="text" id="searchInput" placeholder="××¤×©×¨ ×œ×—×¤×© ×‘×’×•×’×œ ××• ×œ×”×§×œ×™×“ ×›×ª×•×‘×ª ××ª×¨">
<button onclick="searchGoogle()"><img src="https://upload.wikimedia.org/wikipedia/commons/3/3c/Google_Favicon_2025.svg" style="width:20px;height:20px"></button>
</div>
</div>
<div id="home" class="page">
<div id="dateTimeBox" style="position:fixed;top:60px;left:20px;background:rgba(255,255,255,.85);padding:10px 15px;border-radius:12px;font-size:14px;box-shadow:0 2px 8px rgba(0,0,0,.15);text-align:center;z-index:50;">
<div id="clock">00:00</div>
<div id="date">01/01/2025</div>
</div>
<div class="home-content-box">
<h3 style="margin:0 0 15px;background:none;padding:0;box-shadow:none;font-size:1.1em;width:100%;text-align:right;">× ×¤×ª×—×• ×œ××—×¨×•× ×”</h3>
<div class="recent-home" id="recentHomeSimple"></div>
</div>
</div>
<div id="sites" class="page">
<div id="edit-tip-box">
Â  Â ×”×¡×‘×¨ ×§×¦×¨: ×œ×”×•×¡×¤×ª ×§×˜×’×•×¨×™×™×” ×œ×—×¦×• ×¢×œ '×”×•×¡×¤×ª ×§×˜×’×•×¨×™×™×”' ×œ××˜×”. ×œ×¢×¨×™×›×ª ××ª×¨ ×¤×©×•×˜ ×”×§×œ×™×§×• ×¢×œ×™×• ×•×™×¤×ª×— ×—×œ×•× ×™×ª ×™×™×¢×•×“×™×ª. ×œ×”×•×¡×¤×ª ××ª×¨ ×œ×§×˜×’×•×¨×™×” ×œ×—×¦×• ×¢×œ '×”×•×¡×£ ××ª×¨' ×‘×ª×•×š ×”×§×˜×’×•×¨×™×”. **×œ×¡×™×“×•×¨ ××—×“×©, ×’×¨×¨×• ××ª ×”××ª×¨×™× ×•×”×§×˜×’×•×¨×™×•×ª ×œ××§×•×× ×”×—×“×©**. ×‘×¡×™×•× ×”×¢×¨×™×›×” ×”×§×œ×™×§×• ×¢×œ ğŸ’¾ ×©××™×¨×” ×‘×¦×“ ×™××™×Ÿ ×œ××¢×œ×”.
</div>
<div id="categoriesContainer"></div>
<button class="add-btn" id="addCategoryBtn" onclick="addCategory()">+ ×§×˜×’×•×¨×™×”</button>
</div>
<div id="extras" class="page">
<div class="category-box">
<h3>××•×–×™×§×”</h3>
<div class="extras-container">
<div class="frame" data-url="https://kcm.fm/">
<div class="frame-actions">
<button onclick="openModal('https://kcm.fm/')">ğŸ—–</button><button onclick="window.open('https://kcm.fm/','_blank')">â†–</button>
</div>
<iframe src="https://kcm.fm/"></iframe>
</div>
<div class="frame" data-url="https://kol-play.co.il/">
<div class="frame-actions">
<button onclick="openModal('https://kol-play.co.il/')">ğŸ—–</button><button onclick="window.open('https://kol-play.co.il/','_blank')">â†–</button>
</div>
<iframe src="https://kol-play.co.il/"></iframe>
</div>
<div class="frame" data-url="https://kcm.fm/Live/">
<div class="frame-actions">
<button onclick="openModal('https://kcm.fm/Live/')">ğŸ—–</button><button onclick="window.open('https://kcm.fm/Live/','_blank')">â†–</button>
</div>
<iframe src="https://kcm.fm/Live/"></iframe>
</div>
</div>
<div class="extras-container" style="margin-top:10px;gap:10px;">
<div class="frame" style="flex:2;" data-url="https://www.hngn.co.il/">
<div class="frame-actions">
<button onclick="openModal('https://www.hngn.co.il/')">ğŸ—–</button><button onclick="window.open('https://www.hngn.co.il/','_blank')">â†–</button>
</div>
<iframe src="https://www.hngn.co.il/"></iframe>
</div>
<div class="frame" style="flex:1;" data-url="https://www.toker.fm/">
<div class="frame-actions">
<button onclick="openModal('https://www.toker.fm/')">ğŸ—–</button><button onclick="window.open('https://www.toker.fm/','_blank')">â†–</button>
</div>
<iframe src="https://www.toker.fm/"></iframe>
</div>
</div>
</div>
</div>
<div id="historyPage" class="page">
<div class="history-controls">
<button onclick="deleteSelectedHistory()">××—×§ × ×‘×—×¨×™×</button>
<button onclick="clearHistory()">××—×§ ×”×›×œ</button>
</div>
<div class="column" id="recentColumn"></div>
</div>
<div id="news" class="page">
<div class="category-box">
<h3>×—×“×©×•×ª</h3>
<div class="extras-container">
<div class="frame" data-url="https://www.emess.co.il/online?native">
<div class="frame-actions">
<button onclick="openModal('https://www.emess.co.il/online?native')">ğŸ—–</button><button onclick="window.open('https://www.emess.co.il/online?native','_blank')">â†–</button>
</div>
<iframe src="https://www.emess.co.il/online?native"></iframe>
</div>
<div class="frame" data-url="https://www.jdn.co.il/">
<div class="frame-actions">
<button onclick="openModal('https://www.jdn.co.il/')">ğŸ—–</button><button onclick="window.open('https://www.jdn.co.il/','_blank')">â†–</button>
</div>
<iframe src="https://www.jdn.co.il/"></iframe>
</div>
</div>
</div>
</div>
<div id="backgroundModal">
<div class="modal-content">
<h3>×‘×—×¨ ×¨×§×¢</h3>
<input type="file" id="bgUploadInput" accept="image/*" onchange="uploadBackground(this)">
<input type="text" id="bgUrlInput" placeholder="×”×›× ×¡ ×›×ª×•×‘×ª ×ª××•× ×”" style="width:70%;padding:6px;border:1px solid #ccc;border-radius:6px"><br><br>
<button onclick="applyBackgroundUrl()">×”×—×œ ×›×ª×•×‘×ª</button>
<h4>×¨×§×¢×™× ××•×›× ×™×:</h4>
<div class="bg-options">
<img src="https://static.wixstatic.com/media/8cb7ea_bba48fe952e04722a76d58c6953b832b~mv2.png" onclick="setBackground(this.src)">
<img src="https://reka.us/wp-content/uploads/2012/09/windows-8-forests-wallpapers-14.jpg" onclick="setBackground(this.src)">
<img src="https://a-static.besthdwallpaper.com/beautiful-sunset-view-background-wallpaper-1920x1200-11520_6.jpg" onclick="setBackground(this.src)">
<img src="https://www.photo-art.co.il/wp-content/uploads/2015/06/BY1A65881.jpg" onclick="setBackground(this.src)">
</div>
<h4>×‘×—×¨ ×¦×‘×¢:</h4>
<input type="color" id="bgColorPicker" onchange="setBackgroundColor(this.value)">
<br>
<button class="daily-bg-btn" onclick="toggleDailyBackground()">×”×—×œ×¤×” ×™×•××™×ª</button>
<br>
<button class="close-btn" onclick="closeBackgroundModal()">×¡×’×•×¨</button>
</div>
</div>
<div id="modalIframe">
<div class="modal-content-iframe">
<button class="close-modal-iframe" onclick="closeModal()">×¡×’×•×¨ X</button>
<iframe id="fullScreenIframe" src=""></iframe>
</div>
</div>
<div id="editModal">
<div class="modal-content">
<h3 id="editModalTitle">×¢×¨×™×›×ª ××ª×¨</h3>
<input type="text" id="siteNameInput" placeholder="×©× ×”××ª×¨">
<input type="url" id="siteUrlInput" placeholder="×›×ª×•×‘×ª (URL) ×”××ª×¨">
<input type="url" id="siteIconInput" placeholder="××™×™×§×•×Ÿ (×›×ª×•×‘×ª)">
<div>
<button id="saveSiteBtn">×©××™×¨×”</button>
<button id="cancelSiteBtn">×‘×™×˜×•×œ</button>
</div>
<button id="deleteSiteBtn" style="display:none">××—×™×§×ª ××ª×¨</button>
</div>
</div>
<script>
const STORAGE_KEY="shortcuts",D={categories:[{id:"useful",title:"×©×™××•×©×™ ×•× ×¤×•×¥",sites:[{name:"Google",url:"https://www.google.com",icon:"https://www.google.com/favicon.ico"},{name:"××ª×¨ ××–×’ ××•×•×™×¨",url:"https://www.weather.com",icon:"https://www.weather.com/favicon.ico"}]},{id:"news",title:"×—×“×©×•×ª",sites:[{name:"JDN",url:"https://www.jdn.co.il/",icon:"https://www.jdn.co.il/favicon.ico"},{name:"×‘×—×“×¨×™ ×—×¨×“×™×",url:"https://www.bhch.co.il/",icon:"https://www.bhch.co.il/favicon.ico"}]}],recent:[]};
let data=loadData(),editMode=false,currentEditCategoryId=null,currentEditSiteIndex=null;
const savedBackground=localStorage.getItem("backgroundURL");if(savedBackground)document.body.style.background=savedBackground;
function openBackgroundModal(){document.getElementById("backgroundModal").style.display="flex"}
function closeBackgroundModal(){document.getElementById("backgroundModal").style.display="none"}
function setBackground(url){document.body.style.background=`url('${url}') center/cover no-repeat`;localStorage.setItem("backgroundURL",`url('${url}') center/cover no-repeat`);localStorage.setItem("dailyBgEnabled","false")}
function setBackgroundColor(color){document.body.style.background=color;localStorage.setItem("backgroundURL",color);localStorage.setItem("dailyBgEnabled","false")}
function applyBackgroundUrl(){const url=document.getElementById("bgUrlInput").value.trim();if(url)setBackground(url)}
function uploadBackground(input){if(input.files&&input.files[0]){const reader=new FileReader();reader.onload=e=>setBackground(e.target.result);reader.readAsDataURL(input.files[0])}}
const bgImages=[...document.querySelectorAll("#backgroundModal .bg-options img")].map(img=>img.src);
function toggleDailyBackground(){const isEnabled=localStorage.getItem("dailyBgEnabled")==="true";localStorage.setItem("dailyBgEnabled",!isEnabled);alert(!isEnabled?"×”×—×œ×¤×ª ×¨×§×¢×™× ×™×•××™×ª ××•×¤×¢×œ×ª":"×”×—×œ×¤×ª ×¨×§×¢×™× ×™×•××™×ª ×›×‘×•×™×”")}
function applyDailyBackground(){if(localStorage.getItem("dailyBgEnabled")==="true"&&bgImages.length>0){const today=Math.floor(new Date().getTime()/(1000*60*60*24));const index=today%bgImages.length;setBackground(bgImages[index])}}
applyDailyBackground();
function loadData(){
const raw=localStorage.getItem(STORAGE_KEY);if(!raw)return JSON.parse(JSON.stringify(D));
try{
const parsed=JSON.parse(raw);
if(parsed&&Array.isArray(parsed.categories))return parsed;
if(parsed&&typeof parsed==="object"){
const categories=[];
Object.keys(parsed).forEach(k=>{
if(k==="recent")return;
if(Array.isArray(parsed[k]))categories.push({id:k,title:k,sites:parsed[k]});
});
return{categories:categories.length>0?categories:D.categories,recent:parsed.recent||[]};
}}catch(e){console.warn("×©×’×™××” ×‘×˜×¢×™× ×ª ×”Ö¾localStorage",e);}
return JSON.parse(JSON.stringify(D));
}
function persistData(){try{localStorage.setItem(STORAGE_KEY,JSON.stringify(data));}catch(e){console.error("×©×’×™××” ×‘×©××™×¨×”:",e);alert("×©×’×™××” ×‘×©××™×¨×” ×œÖ¾localStorage.");}}
function render(){
renderCategories();renderHistory();renderRecentHome();
const isSitesPage=document.getElementById('sites').style.display==='flex';
const isEditing=editMode?"block":"none";
document.getElementById("addCategoryBtn").style.display=isEditing;
document.getElementById("edit-tip-box").style.display=(editMode&&isSitesPage)?"block":"none";
document.querySelector(".save-btn").style.visibility=(editMode&&isSitesPage)?"visible":"hidden";
document.querySelector(".cancel-btn").style.visibility=(editMode&&isSitesPage)?"visible":"hidden";
document.querySelectorAll(".card").forEach(c => {c.draggable = editMode;if (editMode) {c.classList.add("editing");} else {c.classList.remove("editing");}});
document.querySelectorAll(".category-box").forEach(c => {c.draggable = editMode;if (editMode) {c.classList.add("editing");} else {c.classList.remove("editing");}});
}
function renderCategories(){
const container=document.getElementById("categoriesContainer");container.innerHTML="";
data.categories.forEach(cat=>{
const catBox=document.createElement("div");
catBox.className="category-box";catBox.dataset.key=cat.id;
catBox.draggable=editMode;
catBox.addEventListener('dragstart', handleCategoryDragStart);
catBox.addEventListener('dragover', handleCategoryDragOver);
catBox.addEventListener('drop', handleCategoryDrop);
catBox.addEventListener('dragenter', handleCategoryDragEnter);
catBox.addEventListener('dragleave', handleCategoryDragLeave);
catBox.addEventListener('dragend', handleCategoryDragEnd);
const columnId=cat.id+"Column";
catBox.innerHTML=`<h3 ${editMode?'contenteditable="true"':''}>${escapeHtml(cat.title)}</h3><div class="cards-grid" id="${columnId}"></div>
<button class="add-btn-modal" style="display: ${editMode ? 'block' : 'none'};" onclick="openEditModal('${cat.id}', -1)">+ ×”×•×¡×£ ××ª×¨</button>
<button class="category-delete-btn" style="display: ${editMode ? 'block' : 'none'};">âŒ ××—×™×§×”</button>`;
container.appendChild(catBox);
const delBtn=catBox.querySelector(".category-delete-btn");
if(delBtn)delBtn.onclick=()=>deleteCategoryById(cat.id);
renderCards(cat.id,columnId);
});
}
function renderCards(categoryId,columnId){
const col=document.getElementById(columnId);col.innerHTML="";
const category=data.categories.find(c=>c.id===categoryId);if(!category)return;
col.addEventListener('dragover', handleCardDragOver);
col.addEventListener('drop', handleCardDrop);
category.sites.forEach((site,index)=>{
const card=document.createElement("div");card.className="card";card.dataset.index=index;
card.dataset.categoryId=categoryId;
const siteIcon=site.icon||getFavicon(site.url);
const siteName=escapeHtml(site.name);
if(editMode){
card.classList.add("editing");
card.draggable=true;
card.addEventListener('dragstart', handleCardDragStart);
card.addEventListener('dragenter', handleCardDragEnter);
card.addEventListener('dragleave', handleCardDragLeave);
card.addEventListener('dragend', handleCardDragEnd);
card.onclick=()=>openEditModal(categoryId,index);
card.innerHTML=`<img src="${siteIcon}"><a>${siteName}</a><button class="delete-btn" onclick="event.stopPropagation();deleteSite('${categoryId}', ${index}, true);">X</button>`;
}else{
card.onclick=()=>{window.open(site.url,"_blank");addRecent(categoryId,index);};
card.innerHTML=`<img src="${siteIcon}"><a>${siteName}</a>`;
}
col.appendChild(card);
});
}

// ** ×œ×•×’×™×§×ª ×’×¨×™×¨×” **
let draggedCategory = null, draggedCard = null;
function handleCategoryDragStart(e) {
    if (!editMode) return;
    draggedCategory = this;
    draggedCard = null; 
    e.dataTransfer.effectAllowed = 'move';
    e.dataTransfer.setData('text/plain', this.dataset.key);
    setTimeout(() => { this.classList.add('dragging'); }, 0);
}
function handleCategoryDragOver(e) {
    if (!editMode || !draggedCategory) return;
    e.preventDefault();
    e.dataTransfer.dropEffect = 'move';
    const dropTarget = this;
    if (dropTarget !== draggedCategory) {
        const rect = dropTarget.getBoundingClientRect();
        const next = (e.clientY - rect.top) / rect.height > 0.5;
        const parent = dropTarget.parentNode;
        parent.insertBefore(draggedCategory, next ? dropTarget.nextSibling : dropTarget);
    }
}
function handleCategoryDrop(e) {
    if (!editMode || !draggedCategory) return;
    e.stopPropagation();
    this.classList.remove('drag-over');
}
function handleCategoryDragEnter(e) {
    if (!editMode || !draggedCategory || this === draggedCategory) return;
    this.classList.add('drag-over');
}
function handleCategoryDragLeave(e) {
    if (!editMode || !draggedCategory || this === draggedCategory) return;
    this.classList.remove('drag-over');
}
function handleCategoryDragEnd(e) {
    if (!editMode) return;
    this.classList.remove('dragging');
    draggedCategory = null;
}
function handleCardDragStart(e) {
    if (!editMode) return;
    e.stopPropagation(); 
    draggedCard = this;
    e.dataTransfer.effectAllowed = 'move';
    e.dataTransfer.setData('application/json', JSON.stringify({categoryId: this.dataset.categoryId, index: parseInt(this.dataset.index)}));
    setTimeout(() => { this.classList.add('dragging'); }, 0);
}
function handleCardDragEnter(e) {if (!editMode || !draggedCard || this === draggedCard) return;e.preventDefault();}
function handleCardDragLeave(e) {if (!editMode || !draggedCard || this === draggedCard) return;}
function handleCardDragEnd(e) {if (!editMode) return;this.classList.remove('dragging');draggedCard = null;}
function handleCardDragOver(e) {
    if (!editMode || !draggedCard) return;
    e.preventDefault();
    e.dataTransfer.dropEffect = 'move';
    const dropContainer = this;
    const dropTarget = e.target.closest('.card');
    if (dropTarget && dropTarget !== draggedCard && dropTarget.parentElement === dropContainer) {
        const rect = dropTarget.getBoundingClientRect();
        const next = (e.clientX - rect.left) / rect.width > 0.5;
        dropContainer.insertBefore(draggedCard, next ? dropTarget.nextSibling : dropTarget);
    } else if (dropTarget === null && dropContainer.contains(draggedCard) === false) {
        dropContainer.appendChild(draggedCard);
    }
}
function handleCardDrop(e) {
    if (!editMode || !draggedCard) return;
    e.preventDefault();
    e.stopPropagation();
    try {
        const sourceData = JSON.parse(e.dataTransfer.getData('application/json'));
        const newCategoryContainer = this.closest('.category-box');
        const newCategoryId = newCategoryContainer ? newCategoryContainer.dataset.key : null;
        if (!newCategoryId) return;
        if (sourceData.categoryId !== newCategoryId) {
            draggedCard.dataset.originalCategory = sourceData.categoryId;
            draggedCard.dataset.newCategory = newCategoryId;
        }
        draggedCard.dataset.categoryId = newCategoryId;
    } catch (error) {console.error("×©×’×™××” ×‘-handleCardDrop:", error);}
}
// ** ×¡×•×£ ×œ×•×’×™×§×ª ×’×¨×™×¨×” **

function renderHistory(){
const col=document.getElementById("recentColumn");col.innerHTML='';
if(!data.recent||data.recent.length===0){col.innerHTML='<p style="text-align: center; color: #666; margin-top: 20px;">××™×Ÿ ×”×™×¡×˜×•×¨×™×” ×œ×¦×¤×™×™×”.</p>';return;}
const groupedByDate=data.recent.reduce((acc,item)=>{
const date=item.timestamp?new Date(item.timestamp):new Date();
const dateKey=date.toISOString().split('T')[0];
if(!acc[dateKey]){acc[dateKey]=[];}
acc[dateKey].push(item);return acc;
},{});
Object.keys(groupedByDate).sort((a,b)=>new Date(b)-new Date(a)).forEach(dateKey=>{
const dateOptions={weekday:'long',year:'numeric',month:'2-digit',day:'2-digit'};
const dateDisplay=new Date(dateKey).toLocaleDateString("he-IL",dateOptions);
const dayHeader=document.createElement('h3');
dayHeader.textContent=dateDisplay;
dayHeader.style.cssText='margin:0 0 10px;padding:10px 15px;background:rgba(0,120,215,.1);border-radius:8px;font-size:1.1em;box-shadow:0 1px 3px rgba(0,0,0,.1)';
col.appendChild(dayHeader);
groupedByDate[dateKey].forEach((site)=>{
const historyItem=document.createElement('div');
historyItem.className="history-item";
const realIndex=data.recent.indexOf(site);
historyItem.dataset.index=realIndex;
const timeOptions={hour:'2-digit',minute:'2-digit',second:'2-digit'};
const timeDisplay=site.timestamp?new Date(site.timestamp).toLocaleTimeString("he-IL",timeOptions):'';
historyItem.innerHTML=`<input type="checkbox" class="history-select" style="margin-left:5px"><img src="${site.icon||getFavicon(site.url)}"><span style="font-size: .85em; color: #777; margin-left: 10px;">${timeDisplay}</span><a href="${site.url}" target="_blank">${escapeHtml(site.name)}</a><button class="remove-item" onclick="deleteHistoryItem(${realIndex})">X</button>`;
col.appendChild(historyItem);
});
});
}
function deleteHistoryItem(index){data.recent.splice(index,1);persistData();renderHistory();renderRecentHome();}
function deleteSelectedHistory(){
const indexes=[...document.querySelectorAll(".history-select:checked")].map(cb=>parseInt(cb.parentElement.dataset.index)).filter(i=>!isNaN(i)).sort((a,b)=>b-a);
indexes.forEach(i=>data.recent.splice(i,1));
persistData();renderHistory();renderRecentHome();
}
function clearHistory(){if(confirm("×œ××—×•×§ ××ª ×›×œ ×”×”×™×¡×˜×•×¨×™×”?")){data.recent=[];persistData();renderHistory();renderRecentHome();}}
function renderRecentHome(){
const col=document.getElementById("recentHomeSimple");
const uniqueRecentSites=[],urls=new Set();
for(let i=0;i<(data.recent||[]).length&&uniqueRecentSites.length<6;i++){
const site=data.recent[i];
if(!urls.has(site.url)){urls.add(site.url);uniqueRecentSites.push(site);}
}
col.innerHTML=uniqueRecentSites.length===0?'<p style="text-align: center; color: #666; font-size: 1.1em; margin: 10px 0;">×¢×“×™×™×Ÿ ×œ× ×¤×ª×—×ª ×›×œ×•× ğŸ˜Š</p>':uniqueRecentSites.map(site=>`<div class="card" onclick="window.open('${site.url}','_blank')"><img src="${site.icon||getFavicon(site.url)}"><a>${escapeHtml(site.name)}</a></div>`).join("");
col.parentElement.style.display='block';
}
function openEditModal(categoryId,index){
Â  Â  currentEditCategoryId=categoryId;currentEditSiteIndex=index;
Â  Â  const cat=data.categories.find(c=>c.id===categoryId);if(!cat)return;
Â  Â  const modalTitle=document.getElementById('editModalTitle'),nameInput=document.getElementById('siteNameInput'),urlInput=document.getElementById('siteUrlInput'),iconInput=document.getElementById('siteIconInput'),deleteBtn=document.getElementById('deleteSiteBtn');
Â  Â  if(index===-1){
Â  Â  Â  Â  modalTitle.textContent="×”×•×¡×¤×ª ××ª×¨ ×—×“×©";nameInput.value="";urlInput.value="https://";iconInput.value="";deleteBtn.style.display="none";
Â  Â  }else{
Â  Â  Â  Â  const site=cat.sites[index];
Â  Â  Â  Â  modalTitle.textContent="×¢×¨×™×›×ª ××ª×¨";nameInput.value=site.name;urlInput.value=site.url;iconInput.value=site.icon||"";deleteBtn.style.display="block";
Â  Â  }
Â  Â  document.getElementById("editModal").style.display="flex";nameInput.focus();
}
document.getElementById('saveSiteBtn').onclick=saveSiteFromModal;
document.getElementById('cancelSiteBtn').onclick=closeEditModal;
document.getElementById('deleteSiteBtn').onclick=()=>{if(currentEditCategoryId&&currentEditSiteIndex!==null&&currentEditSiteIndex!==-1){deleteSite(currentEditCategoryId,currentEditSiteIndex);}closeEditModal();};
function closeEditModal(){document.getElementById("editModal").style.display="none";currentEditCategoryId=null;currentEditSiteIndex=null;}
function saveSiteFromModal(){
Â  Â  const categoryId=currentEditCategoryId,index=currentEditSiteIndex;
Â  Â  const cat=data.categories.find(c=>c.id===categoryId);if(!cat)return;
Â  Â  const name=document.getElementById('siteNameInput').value.trim()||"×©× ×—×“×©";
Â  Â  const url=document.getElementById('siteUrlInput').value.trim()||"https://";
Â  Â  const icon=document.getElementById('siteIconInput').value.trim()||getFavicon(url);
Â  Â  if(index===-1){cat.sites.push({name,url,icon});}else{cat.sites[index]={name,url,icon};}
Â  Â  persistData();render();closeEditModal();
}
function deleteSite(categoryId,index,skipConfirm=false){
Â  Â  const cat=data.categories.find(c=>c.id===categoryId);
Â  Â  if(!cat||index===-1)return;
Â  Â  if(skipConfirm||confirm(`×œ××—×•×§ ××ª ×”××ª×¨ ${cat.sites[index].name}?`)){cat.sites.splice(index,1);persistData();render();}
}
function addCategory(){const uniqueId="cat"+Date.now();data.categories.push({id:uniqueId,title:"×§×˜×’×•×¨×™×” ×—×“×©×”",sites:[]});render();if(!editMode)toggleEdit();}
function deleteCategoryById(categoryId){if(!confirm("×œ××—×•×§ ×§×˜×’×•×¨×™×” ×–×•?"))return;data.categories=data.categories.filter(c=>c.id!==categoryId);persistData();render();}
function saveData(){
const newDataCategories = [];
const oldDataSitesMap = new Map();
data.categories.forEach(cat => {
    cat.sites.forEach((site, index) => {
        const key = `${cat.id}-${index}`;
        oldDataSitesMap.set(key, site);
    });
});
[...document.querySelectorAll("#categoriesContainer .category-box")].forEach(domCat => {
    const id=domCat.dataset.key;
    const title=(domCat.querySelector("h3")&&domCat.querySelector("h3").textContent.trim())||"×§×˜×’×•×¨×™×”";
    const sites = [];
    [...domCat.querySelectorAll(".cards-grid .card")].forEach(domCard => {
        const originalIndex = domCard.dataset.index;
        const originalCategoryId = domCard.dataset.originalCategory || domCard.dataset.categoryId;
        const siteKey = `${originalCategoryId}-${originalIndex}`;
        const siteData = oldDataSitesMap.get(siteKey);
        if (siteData) {
            sites.push(siteData);
            oldDataSitesMap.delete(siteKey);
        }
    });
    newDataCategories.push({id,title,sites});
});
data.categories = newDataCategories;
persistData();
toggleEdit();
}
function cancelEdit(){data=loadData();if(editMode)toggleEdit();render();}
function showPage(pageId,btn){
document.querySelectorAll(".page").forEach(p=>p.style.display="none");
document.getElementById(pageId).style.display="flex";
document.querySelectorAll(".side-menu button").forEach(b=>b.classList.remove("active"));
if(btn)btn.classList.add("active");
localStorage.setItem("lastPage",pageId);
const editBtn=document.getElementById("editBtn");
const isSitesPage=pageId==='sites';
if(isSitesPage){editBtn.style.display="flex";}
else{if(editMode)toggleEdit();editBtn.style.display="none";}
document.querySelector(".save-btn").style.visibility=(editMode&&isSitesPage)?"visible":"hidden";
document.querySelector(".cancel-btn").style.visibility=(editMode&&isSitesPage)?"visible":"hidden";
showHideEditTip(isSitesPage && editMode);
render();
}
function showHideEditTip(show) {
    document.getElementById("edit-tip-box").style.display = show ? "block" : "none";
}
function searchGoogle(){
const input=document.getElementById("searchInput").value.trim();
if(!input)return;
const url=(input.startsWith("http://")||input.startsWith("https://"))?input:(input.includes(".")?"https://"+input:"https://www.google.com/search?q="+encodeURIComponent(input));
window.open(url,"_self");
}
document.getElementById("searchInput").addEventListener("keydown",function(e){if(e.key==="Enter")searchGoogle();});
function addRecent(categoryId,index){
const cat=data.categories.find(c=>c.id===categoryId);
if(!cat||!cat.sites[index])return;
const site={...cat.sites[index],timestamp:new Date().getTime(),time:new Date().toLocaleString("he-IL")};
data.recent.unshift(site);
data.recent=data.recent.slice(0,40);
persistData();renderHistory();renderRecentHome();
}
function toggleEdit(){
editMode=!editMode;
document.querySelectorAll("#categoriesContainer h3").forEach(h=>h.contentEditable=editMode);
document.getElementById("addCategoryBtn").style.display=editMode?"block":"none";
const isSitesPage=document.getElementById('sites').style.display==='flex';
document.querySelector(".save-btn").style.visibility=(editMode&&isSitesPage)?"visible":"hidden";
document.querySelector(".cancel-btn").style.visibility=(editMode&&isSitesPage)?"visible":"hidden";
showHideEditTip(isSitesPage && editMode);
render();
}
function openModal(url){document.getElementById("fullScreenIframe").src=url;document.getElementById("modalIframe").style.display="flex";}
function closeModal(){document.getElementById("fullScreenIframe").src="about:blank";document.getElementById("modalIframe").style.display="none";}
function getFavicon(url){try{return new URL(url).origin+"/favicon.ico";}catch(e){return"https://via.placeholder.com/32";}}
function escapeHtml(str){if(str===undefined||str===null)return"";return String(str).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;");}
function updateDateTime(){
const now=new Date();
const optionsDate={day:'2-digit',month:'2-digit',year:'numeric'},optionsDay={weekday:'long'};
document.getElementById("clock").textContent=now.toLocaleTimeString("he-IL",{hour:'2-digit',minute:'2-digit'});
document.getElementById("date").textContent=now.toLocaleDateString("he-IL",optionsDay)+" | "+now.toLocaleDateString("he-IL",optionsDate);
}
setInterval(updateDateTime,1000);updateDateTime();
const lastPage=localStorage.getItem("lastPage")||"home";
const initialButton = document.querySelector(`.side-menu button[onclick*="'${lastPage}'"]`);
showPage(lastPage, initialButton);
render();
</script>
</body>
</html>
